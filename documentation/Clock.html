<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8"/>
	<title>Documentation Class: Clock - Node on Fire</title>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<meta name="description" content="A full-stack isomorphic web framework built on top of Node.js, AngularJS, PostgreSQL."/>
	<link rel="stylesheet" href="/styles/default.min.css"/>
	<script src="/bower_components/jquery/dist/jquery.min.js"></script>
	<script src="/scripts/highlight.min.js"></script>
</head>

<body>
	<nav>
		<ul>
			<li><a href="/">Home</a></li>
			<li><a href="/getting-started">Getting Started</a></li>
			<li class="active"><a href="/documentation">Documentation</a></li>
		</ul>
	</nav>

	<div class="container-fluid">
		<div class="row">
			<div class="col-md-offset-1 col-md-3">
				
				<div id="toc"></div>
				
			</div>

			<div id="main" class="col-md-7">
				


	<h1 class="page-title">Class: Clock</h1>
<section>

<header>
    <h2>
    Clock
    </h2>
    
</header>

<article>
    <div class="container-overview">
    

    
        
<dt>
    <h4 class="name" id="Clock"><span class="type-signature"></span>new Clock<span class="signature">(app)</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>The clock module is responsible for the clock process type. The clock process schedules tasks to run at scheduled time intervals in your worker processes. The clock module is used by e.g. the Triggers and the Scheduler module. The clock module guarantees to schedule tasks without skipping an interval.</p>
<p>Because the clock process might at some point restart or crash and potentially skip a scheduled tasks, the clock process checks at startup if it skipped any task based on the date of the previous executed task. If it identifies a skipped task, it'll schedule the task immediately.</p>
<p>For example, consider a task which sends a mail to all users every month at the 1st day of the month at 13:00 hour exactly. If the clock process crashes at 12:59 hour and starts again at 13:01 the time interval was skipped. The clock module recognizes this and schedules the task at 13:01 instead.</p>
<p>(When the clock module starts the first time, and there are no results, it inserts a fake clock result).</p>
<p>To start the clock process simply invoke the app with the <code>--clock</code> argument. For example, add the following entry to your <code>Procfile</code>:</p>
<pre class="prettyprint source"><code>clock: node index.js --clock</code></pre>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>app</code></td>
            

            <td class="type">
            
                
<span class="label label-primary param-type"><a href="App.html">App</a></span>



            
            </td>

            

            

            <td class="description last"></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        <dl>
            
<dt>
    <h4 class="name" id="addTask"><span class="type-signature"></span>addTask<span class="signature">(timingPattern, taskName, callback)</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Creates a task to run at a time interval. The callback is guaranteed to run. The callback should schedule a job on a worker process and not actually execute any work.</p>
<p>Check the Schedule or Trigger modules instead if you want to schedule periodic tasks.</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>timingPattern</code></td>
            

            <td class="type">
            
                
<span class="label label-primary param-type">String</span>



            
            </td>

            

            

            <td class="description last"><p>A cron-style timing pattern. For more information, see https://github.com/ncb000gt/node-cron.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>taskName</code></td>
            

            <td class="type">
            
                
<span class="label label-primary param-type">String</span>



            
            </td>

            

            

            <td class="description last"><p>The name of the task to run.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="label label-primary param-type">function</span>



            
            </td>

            

            

            <td class="description last"><p>The function which schedules a job on a worker process.</p></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="stop"><span class="type-signature"></span>stop<span class="signature">()</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Stops all the tasks. This is executed when the app is killed.</p>
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
	

	

	

	

	

	

	

	

	



	

	

	

	
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        </dl>
    

    

    
</article>

</section>




			</div>
		</div>

		<div class="row">
			<div class="col-md-offset-4 col-md-7">
				<p class="expl disqus-expl">Do you have any questions or comments on this page? Start a discussion below.</p>

			    <div id="disqus_thread"></div>
				<script type="text/javascript">
    			var disqus_shortname = 'nodeonfire';
    			(function() {
        			var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        			dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    			})();
				</script>
				<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
			</div>
		</div>

		<div class="row">
			<div class="col-md-offset-4 col-md-7">
				This is the footer.
			</div>
		</div>
	</div>

	<script src="/bower_components/jquery/dist/jquery.min.js"></script>
	<script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="scripts/toc.js"></script>
	<script>
		$( function () {
			$( "#toc" ).toc( {
				anchorName  : function ( i, heading, prefix ) {
					return $( heading ).attr( "id" ) || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : "0px"
			} );

			$( "[id*='$']" ).each( function () {
				var $this = $( this );

				$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
			} );
		} );
	 </script>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-52717773-3', 'auto');
ga('send', 'pageview');
</script>

</body>
</html>